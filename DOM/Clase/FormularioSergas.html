<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>

    <style>
        html,
        body {
            margin: 0px;
            height: 100%;
            width: 100%;
        }

        form {
            display: flex;
            flex-direction: column;
            row-gap: 20px;
            width: fit-content;
            margin: auto;
        }

        #form_wrapper {
            border: 1px solid black;
            width: 400px;
            height: 300px;
            margin: auto;
            margin-top: 100px;
            border-radius: 3.5px;
        }

        .form_input {
            display: flex;
            flex-direction: column;
        }

        #escribir_datos{
            width:300px;
            margin:auto;
        }

    </style>
</head>

<body>
    <div id="form_wrapper">
        <form method="post" id="formulario_datos">
            <h3>Datos de Identificación</h3>
            <div class="form_input">
                <label for="n_documento">Número Documento</label>
                <input type="text" name="n_documento" id="n_documento">
            </div>
            <div class="form_input">
                <label for="apelido">Primeiro Apelido</label>
                <input type="text" name="apelido" id="apelido" disabled>
            </div>
            <div class="form_input">
                <label for="data_nacemento">Data de Nacemento:</label>
                <input type="text" name="data_nacemento" id="data_nacemento" disabled>
            </div>

            <div class="form_input">
                <input type="submit" value="Acceder" id="enviar" disabled>
            </div>
        </form>
    </div>

    <div id="escribir_datos">

    </div>

    <script defer>
        let formulario = document.querySelector("#formulario_datos")

        function comprobarDNI() {
            let dni_usuario = formulario.querySelector("#n_documento").value
            let expresion_regular = /^[0-9]{8}[A-Z]{1}$/

            if (expresion_regular.test(dni_usuario)) {
                let apelido = formulario.querySelector("#apelido").disabled = false;
            } else {

            }
        }

        function comprobarApelido() {
            let apelido = formulario.querySelector("#apelido").value
            let expresion_regular = /^[A-z]+$/

            if (expresion_regular.test(apelido)) {
                let data_nacemento = formulario.querySelector("#data_nacemento").disabled = false;
            } else {

            }
        }

        function comprobarDataNacemento() {
            let data_nacemento = formulario.querySelector("#data_nacemento").value
            let expresion_regular = /^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/

            if (expresion_regular.test(data_nacemento)) {
                let enviar = formulario.querySelector("#enviar").disabled = false;
            } else {

            }
        }

        function escribirDatos(event) {
            event.preventDefault()

            let div_escribir = document.querySelector("#escribir_datos")
            let dni = formulario.querySelector("#n_documento").value
            let apelido = formulario.querySelector("#apelido").value
            let data = formulario.querySelector("#data_nacemento").value

            let content = div_escribir.querySelectorAll("p")

            if (content.length == 0) {
                let p1 = document.createElement("p")
                let p2 = document.createElement("p")
                let p3 = document.createElement("p")

                p1.textContent = dni
                div_escribir.append(p1)

                p2.textContent = apelido
                div_escribir.append(p2)

                p3.textContent = data
                div_escribir.append(p3)
            }else{
                content[0].textContent = dni
                div_escribir.append(content[0])

                content[1].textContent = apelido
                div_escribir.append(content[1])

                content[2].textContent = data
                div_escribir.append(content[2])
            }
        }

        let dni_usuario = formulario.querySelector("#n_documento")
        let apelido = formulario.querySelector("#apelido")
        let data_nacemento = formulario.querySelector("#data_nacemento")

        dni_usuario.addEventListener("change", comprobarDNI)
        apelido.addEventListener("change", comprobarApelido)
        data_nacemento.addEventListener("change", comprobarDataNacemento)
        formulario.addEventListener("submit", escribirDatos)
    </script>
</body>

</html>